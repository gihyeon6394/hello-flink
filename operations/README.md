# What is Apache Flink? — Operations

Apache Flink는 **무한·유한 데이터 스트림에 대한 상태 기반 연산**을 위한 프레임워크로, 많은 스트리밍 애플리케이션이 **중단 없이 24/7 실행**되는 것을 전제로 한다. 이를 위해 Flink는 *
*강력한 장애 복구**, **운영·모니터링 도구**, **애플리케이션 관리 기능**에 중점을 둔다.

### 24/7 무중단 애플리케이션 실행

분산 시스템에서 장애는 필연적이므로, 스트림 프로세서는 장애 발생 후에도 **상태 일관성을 유지하며 정상 동작을 이어갈 수 있어야 한다**.

Flink는 다음 기능으로 이를 보장한다.

- **일관된 체크포인트**
    - 애플리케이션 상태의 일관된 스냅샷을 주기적으로 저장
    - 장애 시 최신 체크포인트에서 재시작
    - 리셋 가능한 소스와 결합해 Exactly-once 상태 보장
- **효율적인 체크포인트**
    - 비동기·점진적 체크포인팅으로 지연시간 영향 최소화
    - 수 TB 상태에서도 안정적 운영 가능
- **End-to-End Exactly-Once**
    - 트랜잭션 싱크를 통해 장애 시에도 출력 데이터 중복 방지
- **클러스터 매니저 통합**
    - YARN, Kubernetes 등과 연동
    - 프로세스 장애 시 자동 재기동
- **고가용성(HA) 구성**
    - 단일 장애 지점 제거
    - ZooKeeper 기반 분산 코디네이션

### 애플리케이션 업데이트·마이그레이션·중단·재개

비즈니스 핵심 스트리밍 애플리케이션은 **상태를 잃지 않고** 업데이트 및 유지보수가 가능해야 한다.

이를 위해 Flink는 **Savepoint** 기능을 제공한다.

- **Savepoint**
    - 수동으로 생성하는 상태 스냅샷
    - 애플리케이션 중단 후에도 유지
    - 상태 호환 애플리케이션 시작 시 초기 상태로 사용 가능

Savepoint를 통해 가능한 작업:

- **애플리케이션 진화**
    - 버그 수정·기능 개선 버전을 기존 상태로 재시작
    - 과거 시점 상태로 되돌려 잘못된 결과 복구
- **클러스터 마이그레이션**
    - 애플리케이션을 다른 클러스터로 이동 또는 복제
- **Flink 버전 업그레이드**
    - 새로운 Flink 버전으로 애플리케이션 이전
- **스케일 조정**
    - 병렬도 증가·감소 시 상태 재분배
- **A/B 테스트 및 What-if 분석**
    - 동일한 상태에서 여러 버전 성능·품질 비교
- **중단 및 재개**
    - Savepoint 생성 후 애플리케이션 중단
    - 이후 언제든 동일 상태로 재개
- **아카이빙**
    - 과거 시점 상태 복원을 위한 장기 보관

### 애플리케이션 모니터링 및 제어

장시간 실행되는 스트리밍 애플리케이션은 **모니터링, 로깅, 제어 인터페이스**와의 통합이 필수적이다.

Flink는 다음 운영 기능을 제공한다.

- **Web UI**
    - 실행 중 애플리케이션 상태 확인, 디버깅
    - 작업 제출 및 취소 가능
- **로깅**
    - slf4j 기반
    - log4j, logback과 연동
- **메트릭**
    - 시스템·사용자 정의 메트릭 수집
    - JMX, Prometheus, Graphite, Datadog 등 다양한 리포터 지원
- **REST API**
    - 애플리케이션 제출·중단
    - Savepoint 생성
    - 실행 중·완료된 애플리케이션 메타데이터 및 메트릭 조회
